# PocketSmith Category Recategorisation Plan

## Overview
Consolidate 63 existing PocketSmith categories down to 12 new categories, using labels to retain granular information.

## Step 1: Category Mapping

### 12 New Categories

1. **Bills**: Necessary household bills including utilities, tax services, phone/internet, online subscriptions, insurance, health, medical appointments
2. **Dining**: Discretionary eating at restaurants/cafes, work lunch, takeout from restaurants  
3. **Education**: School fees, music lessons, kids classes, child care, tutoring
4. **Giving**: Church giving, charity, mission giving
5. **Groceries**: Supermarkets, grocery stores, fresh markets, butchers
6. **Holidays**: Flights, hotels
7. **Household**: Necessary household spending (not bills) - maintenance, cleaning/lawn services, repairs, tradies (handyman, locksmith, electrician, tree/gutter cleaning), home office supplies, stationary, clothing, kitchen tools, computers, printers, pet expenses
8. **Income**: Salary, government payments, investment income
9. **Mortgage**: Mortgage interest payments
10. **Shopping**: Non-necessary lifestyle spending - toys, makeup, high-end clothing, bikes/cycling clothes, running clothes/shoes, games, music, high-end bags, fashion, jewellery, hobbies
11. **Transfer**: Fund transfers between accounts (usually same amounts with opposite signs, same day or within 1-2 days)
12. **Transport**: All transport expenses - parking, petrol, public transport, parking/traffic fines

### Mapping from 63 Existing Categories

| Old Category | New Category | Rationale |
|--------------|--------------|-----------|
| Bills | Bills | Direct match - household bills |
| Eating out | Dining | Restaurant/cafe spending |
| Education | Education | Direct match |
| Giving | Giving | Direct match |
| Groceries | Groceries | Direct match |
| Household | Household | General household spending |
| Income | Income | Direct match |
| Insurance | Bills | Necessary household bill |
| Medical | Bills | Health/medical appointments |
| Mortgage | Mortgage | Direct match |
| Online Services | Bills | Online subscriptions |
| Recreation | Shopping | Discretionary lifestyle spending |
| Service Charges/Fees | Bills | Bank/service fees |
| Transfer | Transfer | Direct match |
| Transport | Transport | Direct match |
| Clothing/Shoes | Household | Basic clothing needs |
| Refunds/Adjustments | Transfer | Account adjustments |
| Healthcare/Medical | Bills | Health services |
| Home Maintenance | Household | House maintenance |
| Transfers | Transfer | Fund transfers |
| Shopping | Shopping | Direct match - discretionary |
| Provider Fee | Bills | Service provider fees |
| Bank Fees | Bills | Banking charges |
| Fuel | Transport | Petrol/fuel |
| Alcohol & Bars | Dining | Restaurant/bar spending |
| Professional Services | Bills | Tax/professional services |
| Government Services | Bills | Government fees |
| Automotive | Transport | Car-related expenses |
| Computing | Household | Home computers/tech |
| Housing | Household | Housing-related costs |
| Cash Withdrawal | Transfer | Cash transfers |
| Postage | Household | Home office supplies |
| Jewellery | Shopping | Luxury/fashion items |
| Child Care | Education | Child care services |
| Business Miscellaneous | Bills | Business-related bills |
| Printing | Household | Home office supplies |
| Restaurants/Dining | Dining | Restaurant spending |
| Travel | Holidays | Travel expenses |
| Electronics | Household | Home electronics |
| Healthcare / Medical | Bills | Health services |
| Gasoline/Fuel | Transport | Vehicle fuel |
| Rentals | Bills | Rental services |
| Phone | Bills | Phone services |
| Charitable Giving | Giving | Charity donations |
| Office Supplies | Household | Home office supplies |
| Utilities | Bills | Utility bills |
| Personal Care | Household | Personal care items |
| Automotive Expenses | Transport | Car expenses |
| Clothing | Household | Basic clothing |
| Rent | Bills | Rental payments |
| Child/Dependent Expenses | Education | Child-related costs |
| Taxes | Bills | Tax payments |
| Home Improvement | Household | Home maintenance |
| Telephone Services | Bills | Phone/internet bills |
| Dues and Subscriptions | Bills | Subscription services |
| Pets/Pet Care | Household | Pet expenses |
| Cable/Satellite Services | Bills | Internet/TV services |
| Securities Trades | Transfer | Investment transfers |
| Retirement Contributions | Transfer | Retirement transfers |
| Hobbies | Shopping | Hobby spending |
| Postage and Shipping | Household | Shipping/postage |
| Power | Bills | Utility bills |
| Loan Repayment | Bills | Loan payments |

## Step 2: Label Strategy

### Label Guidelines
- Short and succinct (single words preferred)
- Maximum 2 words connected by hyphen if needed
- No other punctuation permitted
- Consolidate similar meanings
- Retain information lost in category consolidation
- Avoid one-to-one mapping with old categories

### Proposed Labels

**Bills-related labels:**
- `utilities` (Power, Utilities)
- `telecom` (Phone, Telephone Services, Cable/Satellite Services)
- `insurance` (Insurance)
- `medical` (Medical, Healthcare/Medical)
- `professional` (Professional Services, Government Services)
- `subscription` (Online Services, Dues and Subscriptions)
- `rent` (Rent, Rentals)
- `tax` (Taxes)
- `loan` (Loan Repayment)

**Transport labels:**
- `fuel` (Fuel, Gasoline/Fuel)
- `automotive` (Automotive, Automotive Expenses)

**Household labels:**
- `maintenance` (Home Maintenance, Home Improvement)
- `office` (Office Supplies, Printing, Postage)
- `electronics` (Computing, Electronics)
- `personal-care` (Personal Care)
- `pets` (Pets/Pet Care)
- `clothing` (Clothing, Clothing/Shoes)

**Transfer labels:**
- `investment` (Securities Trades)
- `retirement` (Retirement Contributions)
- `cash` (Cash Withdrawal)
- `refund` (Refunds/Adjustments)

**Dining labels:**
- `alcohol` (Alcohol & Bars)

**Education labels:**
- `childcare` (Child Care, Child/Dependent Expenses)

**Giving labels:**
- `charity` (Charitable Giving)

**Shopping labels:**
- `jewelry` (Jewellery)
- `hobby` (Hobbies)

**Holiday labels:**
- `travel` (Travel)

### Category-to-Label Mapping

| Old Category | New Category | Suggested Labels |
|--------------|--------------|------------------|
| Bills | Bills | (none - generic bills) |
| Eating out | Dining | (none - generic dining) |
| Education | Education | (none - generic education) |
| Giving | Giving | (none - generic giving) |
| Groceries | Groceries | (none - generic groceries) |
| Household | Household | (none - generic household) |
| Income | Income | (none - generic income) |
| Insurance | Bills | `insurance` |
| Medical | Bills | `medical` |
| Mortgage | Mortgage | (none - specific category) |
| Online Services | Bills | `subscription` |
| Recreation | Shopping | (none - general shopping) |
| Service Charges/Fees | Bills | (none - generic fees) |
| Transfer | Transfer | (none - generic transfer) |
| Transport | Transport | (none - generic transport) |
| Clothing/Shoes | Household | `clothing` |
| Refunds/Adjustments | Transfer | `refund` |
| Healthcare/Medical | Bills | `medical` |
| Home Maintenance | Household | `maintenance` |
| Transfers | Transfer | (none - generic transfer) |
| Shopping | Shopping | (none - generic shopping) |
| Provider Fee | Bills | (none - generic provider) |
| Bank Fees | Bills | (none - bank fees) |
| Fuel | Transport | `fuel` |
| Alcohol & Bars | Dining | `alcohol` |
| Professional Services | Bills | `professional` |
| Government Services | Bills | `professional` |
| Automotive | Transport | `automotive` |
| Computing | Household | `electronics` |
| Housing | Household | (none - generic housing) |
| Cash Withdrawal | Transfer | `cash` |
| Postage | Household | `office` |
| Jewellery | Shopping | `jewelry` |
| Child Care | Education | `childcare` |
| Business Miscellaneous | Bills | (none - business) |
| Printing | Household | `office` |
| Restaurants/Dining | Dining | (none - generic dining) |
| Travel | Holidays | `travel` |
| Electronics | Household | `electronics` |
| Healthcare / Medical | Bills | `medical` |
| Gasoline/Fuel | Transport | `fuel` |
| Rentals | Bills | `rent` |
| Phone | Bills | `telecom` |
| Charitable Giving | Giving | `charity` |
| Office Supplies | Household | `office` |
| Utilities | Bills | `utilities` |
| Personal Care | Household | `personal-care` |
| Automotive Expenses | Transport | `automotive` |
| Clothing | Household | `clothing` |
| Rent | Bills | `rent` |
| Child/Dependent Expenses | Education | `childcare` |
| Taxes | Bills | `tax` |
| Home Improvement | Household | `maintenance` |
| Telephone Services | Bills | `telecom` |
| Dues and Subscriptions | Bills | `subscription` |
| Pets/Pet Care | Household | `pets` |
| Cable/Satellite Services | Bills | `telecom` |
| Securities Trades | Transfer | `investment` |
| Retirement Contributions | Transfer | `retirement` |
| Hobbies | Shopping | `hobby` |
| Postage and Shipping | Household | `office` |
| Power | Bills | `utilities` |
| Loan Repayment | Bills | `loan` |

## Step 3: Implementation Plan

### Remapping Script Requirements
1. **Progress Tracking**: Save progress to avoid re-processing transactions
2. **Batch Processing**: Handle tens of thousands of transactions efficiently
3. **Error Recovery**: Resume from interruptions
4. **Validation**: Ensure no transactions left before category deletion

### Process Flow
For each existing category:
1. List all transactions in the category
2. For each transaction:
   - Move to new category (create if doesn't exist)
   - Apply appropriate labels
   - Mark as processed in progress file
3. Verify no transactions remain in old category
4. Delete old category
5. Update progress tracking

### API Operations Needed
- `client.transactions.list_transactions(user_id, category_id=X)`
- `client.transactions.update_transaction(id, category_id=Y)`
- `client.labels.create_label()` (if needed)
- `client.transactions.assign_labels()` (if available)
- `client.categories.delete_category(id)`

### Progress File Format
```json
{
  "processed_categories": [7312266, 7312544, ...],
  "processed_transactions": [12345, 67890, ...],
  "created_categories": {"new_category_name": new_id, ...},
  "created_labels": {"label_name": label_id, ...}
}
```

## Execution Steps
1. Define 12 new categories and their purposes
2. Map all 63 existing categories to new ones
3. Design label strategy for retained information
4. Implement and test remapping script
5. Execute remapping (potentially multiple runs)
6. Verify final state: exactly 12 categories remain

## Current Status
- [ ] Step 1: Define new categories and mapping
- [ ] Step 2: Design label strategy  
- [ ] Step 3: Implement remapping script
- [ ] Step 4: Execute remapping
- [ ] Step 5: Verification and cleanup